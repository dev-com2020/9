<style>
    input.ng-dirty.ng-invalid {
        border: 2px solid red;
    }

    input.ng-dirty.ng-valid {
        border: 2px solid green;
    }
</style>


<ng-template #titleTemplate let-text="title">
    <h4 class="p-2 bg-success text-white">{{text}}</h4>
</ng-template>
<ng-template [ngTemplateOutlet]="titleTemplate" [ngTemplateOutletContext]="{title: 'Nagłówek'}"></ng-template>

<div class="text-white m-2">
    <div class="bg-info p-2">
        Mamy {{getProductCount()}} produktów.
    </div>

    <div class="bg-info p-2">
        <!-- Wybrany produkt: {{product.value || '(brak)'}} -->
        Wybrany produkt: {{selectedProduct || '(brak)'}}
    </div>

    <table class="table table-sm table-bordered mt-1 text-white">
        <tr>
            <th>ID</th>
            <th>Produkt</th>
            <th>Kategoria</th>
            <th>Cena</th>
        </tr>
        <tr *ngFor="let item of getProducts(); let i = index; let odd = odd; 
    let first = first; let last = last; trackBy:getKey" class="text-white" [class.bg-primary]="odd"
            [class.bg-info]="!odd" [class.bg-warning]="first || last" [class.bg-warning]="getSelected(item)">
            <td (mouseover)="selectedProduct=item.name">{{i + 1}}</td>
            <td>{{item.name}}</td>
            <td>{{item.category}}</td>
            <td>{{item.price}}</td>
            <!-- <td *ngIf="!last">{{item.price}}</td> -->
        </tr>
    </table>

    <form class="m-2" novalidate [formGroup]="formGroup" (ngSubmit)="submitForm()">
        <div class="bg-danger" *ngIf="formSubmitted && formGroup.invalid">
            Wystąpiły problemy z formularzem!
            <ul>
            <li *ngFor="let error of formGroup.getFormValidationMessages()">
                {{error}}
                </li>
                </ul>
                               
        </div>
        <div class="form-group">
            <label>Nazwa produktu</label>
            <input class="form-control" name="name" formControlName="name">
            <ul class="text-danger list-unstyled"
                *ngIf="(formSubmitted || formGroup.controls['name'].dirty) && formGroup.controls['name'].invalid">
               
                    <li *ngFor="let error of formGroup.getValidationMessages('name')">
                        {{error}}
                    </li>
                </ul>
                
                <div class="form-group">
                    <label>Kategoria</label>
                    <input class="form-control" name="category" formControlName="category" />
                    <ul class="text-danger list-unstyled" *ngIf="(formSubmitted || formGroup.controls['category'].dirty) &&
            formGroup.controls['category'].invalid">
                        <li *ngFor="let error of formGroup.getValidationMessages('category')">
                            {{error}}
                        </li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Cena</label>
                    <input class="form-control" name="price" formControlName="price" />
                    <ul class="text-danger list-unstyled" *ngIf="(formSubmitted || formGroup.controls['price'].dirty) &&
            formGroup.controls['price'].invalid">
                        <li *ngFor="let error of formGroup.getValidationMessages('price')">
                            {{error}}
                        </li>
                    </ul>
                </div>
                <button class="btn btn-primary" type="submit" [disabled]="formSubmitted && formGroup.invalid"
                    [class.btn-secondary]="formSubmitted && formGroup.invalid">Dodaj</button>
    </div>
    </form>

    <ng-template [ngTemplateOutlet]="titleTemplate" [ngTemplateOutletContext]="{title: 'Stopka'}"></ng-template>

    <!-- <div class="bg-info p-2">
    Następny produkt to {{nextProduct.name}}
</div> -->
    <div class="bg-info p-2">
        Cena po zaokrągleniu wynosi {{getProductPrice(2)}}zł.
    </div>

</div>